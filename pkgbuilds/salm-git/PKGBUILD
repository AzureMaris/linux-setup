pkgname=salm-git
_pkgname=salm
pkgver=r29.b51f777
pkgrel=1
pkgdesc='A way to manage dots'
arch=(any)
url="https://github.com/BluewyDiamond/$_pkgname"
depends=(nushell)
makedepends=(git)
provides=($_pkgname)
conflicts=($_pkgname $_pkgname-bin $_pkgname-git)
source=("git+$url.git")
sha256sums=('SKIP')

pkgver() {
   cd "$srcdir/$_pkgname"
   printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short=7 HEAD)"
}

package() {
   cd "$srcdir/$_pkgname"
   install -d "$pkgdir/usr/share/$_pkgname"
   cp -r * "$pkgdir/usr/share/$_pkgname"
   mkdir -p "$pkgdir/usr/bin"
   ln -s "/usr/share/$_pkgname/rsc/$_pkgname" "$pkgdir/usr/bin/$_pkgname"
}
